{% extends 'base.html' %}

{% block title %}–ú–æ–∏ –æ–±–º–µ–Ω—ã ‚Äî SkillSwap{% endblock %}

{% block content %}
    <h2>üîÑ –ú–æ–∏ –æ–±–º–µ–Ω—ã</h2>

    {% if exchanges %}
        <div style="display: flex; flex-direction: column; gap: 20px;">
            {% for exchange in exchanges %}
                <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                    <h3>
                        {% if exchange.user1 == user %}
                            ‚Üî –° {{ exchange.user2.full_name }}
                        {% else %}
                            ‚Üî –° {{ exchange.user1.full_name }}
                        {% endif %}
                    </h3>

                    {% if exchange.proposal %}
                        <p><strong>–ù–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</strong> 
                            "{{ exchange.proposal.skill_offered.name }} ‚Üí {{ exchange.proposal.skill_wanted.name }}"
                        </p>
                    {% elif exchange.request %}
                        <p><strong>–ù–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞:</strong> 
                            "{{ exchange.request.skill_wanted.name }} –≤ –æ–±–º–µ–Ω –Ω–∞ {{ exchange.request.skill_offered.name }}"
                        </p>
                    {% endif %}

                    <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ exchange.get_status_display }}</p>
                    <p><strong>–§–æ—Ä–º–∞—Ç:</strong> {{ exchange.get_format_display }}</p>

                    {% if exchange.start_date %}
                        <p><strong>–ù–∞—á–∞–ª–æ:</strong> {{ exchange.start_date|date:"d.m.Y H:i" }}</p>
                    {% endif %}
                    {% if exchange.end_date %}
                        <p><strong>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ:</strong> {{ exchange.end_date|date:"d.m.Y H:i" }}</p>
                    {% endif %}

                    {% if exchange.location and exchange.format == '–æ—Ñ–ª–∞–π–Ω' %}
                        <p><strong>–ú–µ—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∏:</strong> {{ exchange.location }}</p>
                    {% endif %}

                    <div style="margin-top: 15px;">
                        <a href="#" style="color: #2980b9; margin-right: 15px;">‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</a>
                        {% if exchange.status == '–∞–∫—Ç–∏–≤–µ–Ω' %}
                            <a href="#" style="color: #27ae60;">‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±–º–µ–Ω</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –æ–±–º–µ–Ω–æ–≤. <a href="{% url 'proposals_list' %}" style="color: #2980b9;">–ù–∞–π–¥–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</a> –∏–ª–∏ <a href="{% url 'proposal_create' %}" style="color: #2980b9;">—Å–æ–∑–¥–∞–π —Å–≤–æ—ë</a>.</p>
        </div>
    {% endif %}

    <a href="{% url 'home' %}" style="color: #6c757d;">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
{% endblock %}