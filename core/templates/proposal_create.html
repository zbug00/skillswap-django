{% extends 'base.html' %}
{% load static %}

{% block title %}–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Äî SkillSwap{% endblock %}

{% block content %}
<div class="proposal-create-container">
    <div class="proposal-create-card">
        <div class="proposal-create-header">
            <h2>‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ–±–º–µ–Ω–∞</h2>
        </div>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        {% if form.non_field_errors %}
            <div class="alert alert-error">
                {% for error in form.non_field_errors %}
                    {{ error }}
                {% endfor %}
            </div>
        {% endif %}

        <form method="post" class="proposal-create-form" id="proposalCreateForm" novalidate>
            {% csrf_token %}

            <div class="form-group">
                <div class="input-wrapper">
                    <select id="skill_offered" name="skill_offered" required>
                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–≤—ã–∫ –¥–ª—è –æ–±–º–µ–Ω–∞</option>
                        {% for skill in form.skill_offered.field.queryset %}
                            <option value="{{ skill.id }}" {% if form.skill_offered.value == skill.id %}selected{% endif %}>{{ skill.name }} ({{ skill.get_level_display }})</option>
                        {% endfor %}
                    </select>
                </div>
                <span class="error-message" id="skill_offeredError"></span>
                {% if form.skill_offered.errors %}
                    <span class="error-message">{{ form.skill_offered.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <div class="input-wrapper">
                    <select id="skill_wanted" name="skill_wanted" required>
                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –∂–µ–ª–∞–µ–º—ã–π –Ω–∞–≤—ã–∫</option>
                        {% for skill in form.skill_wanted.field.queryset %}
                            <option value="{{ skill.id }}" {% if form.skill_wanted.value == skill.id %}selected{% endif %}>{{ skill.name }} ({{ skill.get_level_display }})</option>
                        {% endfor %}
                    </select>
                </div>
                <span class="error-message" id="skill_wantedError"></span>
                {% if form.skill_wanted.errors %}
                    <span class="error-message">{{ form.skill_wanted.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <div class="input-wrapper">
                    <select id="format" name="format" required>
                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ–±–º–µ–Ω–∞</option>
                        {% for value, label in form.format.field.choices %}
                            {% if value %}
                                <option value="{{ value }}" {% if form.format.value == value %}selected{% endif %}>{{ label }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                <span class="error-message" id="formatError"></span>
                {% if form.format.errors %}
                    <span class="error-message">{{ form.format.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <div class="input-wrapper">
                    <select id="deadlines" name="deadlines" required>
                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ä–æ–∫–∏</option>
                        {% for value, label in form.deadlines.field.choices %}
                            {% if value %}
                                <option value="{{ value }}" {% if form.deadlines.value == value %}selected{% endif %}>{{ label }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </div>
                <span class="error-message" id="deadlinesError"></span>
                {% if form.deadlines.errors %}
                    <span class="error-message">{{ form.deadlines.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <div class="input-wrapper">
                    <textarea id="description" name="description" required>{{ form.description.value|default:'' }}</textarea>
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</label>
                </div>
                <span class="error-message" id="descriptionError"></span>
                {% if form.description.errors %}
                    <span class="error-message">{{ form.description.errors }}</span>
                {% endif %}
            </div>

            <button type="submit" class="proposal-create-btn">
                <span class="btn-text">üì§ –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</span>
                <span class="btn-loader"></span>
            </button>
        </form>

        <div class="back-link">
            <a href="{% url 'proposals_list' %}">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
        </div>
    </div>
</div>

<link rel="stylesheet" href="{% static 'css/proposal_create.css' %}">
<script src="{% static 'js/proposal_create.js' %}"></script>
{% endblock %}