{% extends 'base.html' %}
{% load static %}

{% block title %}–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–±–º–µ–Ω–∞ ‚Äî SkillSwap{% endblock %}

{% block content %}
<div class="proposals-container">
    <div class="proposals-header">
        <h2>ü§ù –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–±–º–µ–Ω–∞</h2>
    </div>

    {% if proposals %}
        <div class="proposals-grid">
            {% for proposal in proposals %}
                <div class="proposal-card">
                    <div class="proposal-header">
                        <div class="proposal-user">
                            üë§ {{ proposal.user.full_name }}
                        </div>
                        <div class="proposal-meta">
                            –†–µ–π—Ç–∏–Ω–≥: {{ proposal.user.rating }} ‚≠ê
                        </div>
                    </div>

                    <div class="proposal-exchange">
                        <div class="proposal-offered">
                            <div class="proposal-skill-name">{{ proposal.skill_offered.name }}</div>
                            <span class="proposal-skill-level">{{ proposal.skill_offered.get_level_display }}</span>
                        </div>
                        <div class="proposal-arrow">‚Üí</div>
                        <div class="proposal-wanted">
                            <div class="proposal-skill-name">{{ proposal.skill_wanted.name }}</div>
                            <span class="proposal-skill-level">{{ proposal.skill_wanted.get_level_display }}</span>
                        </div>
                    </div>

                    <div class="proposal-details">
                        <div class="proposal-format">
                            <strong>–§–æ—Ä–º–∞—Ç:</strong> {{ proposal.get_format_display }}
                        </div>
                        <div class="proposal-date">
                            –°–æ–∑–¥–∞–Ω–æ: {{ proposal.created_at|date:"d.m.Y H:i" }}
                        </div>
                    </div>

                    {% if proposal.description %}
                        <div class="proposal-description">
                            <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ proposal.description }}
                        </div>
                    {% endif %}

                    <div class="proposal-actions">
                        {% if user.is_authenticated and proposal.user != user %}
                            <a href="{% url 'exchange_create_from_proposal' proposal.id %}" class="respond-btn">
                                üîÑ –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
                            </a>
                        {% elif user.is_authenticated and proposal.user == user %}
                            <span class="own-proposal">(—ç—Ç–æ –≤–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)</span>
                        {% else %}
                            <a href="{% url 'login' %}?next={{ request.path }}" class="login-btn">
                                üîê –í–æ–π—Ç–∏, —á—Ç–æ–±—ã –æ—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è
                            </a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <p>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ–±–º–µ–Ω–∞ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
            {% if user.is_authenticated %}
                <a href="{% url 'proposal_create' %}" class="create-link">
                    ‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                </a>
            {% else %}
                <a href="{% url 'login' %}?next={% url 'proposal_create' %}" class="create-link">
                    üîê –í–æ–π—Ç–∏, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                </a>
            {% endif %}
        </div>
    {% endif %}
</div>

<link rel="stylesheet" href="{% static 'css/proposals_list.css' %}">
{% endblock %}