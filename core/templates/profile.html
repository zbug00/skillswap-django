{% extends 'base.html' %}
{% load static %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å ‚Äî SkillSwap{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
    </div>

    <div class="profile-grid">
        <div class="profile-main-card">
            <div class="profile-info">
                <h3>üìä –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <div class="profile-details">
                    <div class="profile-detail">
                        <strong>–ò–º—è:</strong>
                        <span>{{ user.full_name }}</span>
                    </div>
                    <div class="profile-detail">
                        <strong>Email:</strong>
                        <span>{{ user.email }}</span>
                    </div>
                    <div class="profile-detail">
                        <strong>–ì–æ—Ä–æ–¥:</strong>
                        <span>{{ user.city|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}</span>
                    </div>
                    <div class="profile-detail">
                        <strong>–†–µ–π—Ç–∏–Ω–≥:</strong>
                        <span>{{ user.rating }} ‚≠ê</span>
                    </div>
                    <div class="profile-detail">
                        <strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong>
                        <span>{{ user.registration_date|date:"d.m.Y" }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="skills-card">
            <div class="section-header">
                <h3>üéì –ú–æ–∏ –Ω–∞–≤—ã–∫–∏</h3>
            </div>
            
            {% if user_skills %}
                <ul class="skills-list">
                    {% for us in user_skills %}
                        <li class="skill-item">
                            <div class="skill-name">{{ us.skill.name }}</div>
                            <div class="skill-meta">
                                <span>–£—Ä–æ–≤–µ–Ω—å: {{ us.skill.get_level_display }}</span>
                                <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ us.skill.category.name }}</span>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
                <div style="text-align: center; margin-top: 16px;">
                    <a href="{% url 'skill_create' %}" class="action-link add-skill-link">
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤—ã–∫
                    </a>
                </div>
            {% else %}
                <div class="empty-state">
                    <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –Ω–∞–≤—ã–∫–æ–≤.</p>
                    <a href="{% url 'skill_create' %}" class="action-link add-skill-link">
                        ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤—ã–∫
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="profile-grid">
        <div class="profile-section">
            <div class="section-header">
                <h3>ü§ù –ú–æ–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–±–º–µ–Ω–∞</h3>
            </div>
            
            {% if user_proposals %}
                <div class="proposals-list">
                    {% for prop in user_proposals %}
                        <div class="proposal-item">
                            <div class="proposal-exchange">
                                <strong>–ü—Ä–µ–¥–ª–∞–≥–∞—é:</strong> {{ prop.skill_offered.name }} ‚Üí 
                                <strong>–•–æ—á—É:</strong> {{ prop.skill_wanted.name }}
                            </div>
                            <div class="proposal-meta">
                                <span>–§–æ—Ä–º–∞—Ç: {{ prop.get_format_display }}</span>
                                <span>–°–æ–∑–¥–∞–Ω–æ: {{ prop.created_at|date:"d.m.Y H:i" }}</span>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state">
                    <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.</p>
                    <a href="{% url 'proposal_create' %}" class="action-link">
                        üìù –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                    </a>
                </div>
            {% endif %}
        </div>

        <div class="profile-section">
            <div class="section-header">
                <h3>üîÑ –ú–æ–∏ –æ–±–º–µ–Ω—ã</h3>
            </div>
            
            {% if user_exchanges %}
                <div class="exchanges-list">
                    {% for exchange in user_exchanges %}
                        <div class="exchange-item">
                            <div class="exchange-users">
                                –° <strong>{{ exchange.user1.full_name }}</strong> ‚Üî 
                                <strong>{{ exchange.user2.full_name }}</strong>
                            </div>
                            <div class="exchange-meta">
                                <span>–°—Ç–∞—Ç—É—Å: <strong>{{ exchange.get_status_display }}</strong></span>
                                <span>–§–æ—Ä–º–∞—Ç: {{ exchange.get_format_display }}</span>
                                {% if exchange.start_date %}
                                    <span>–ù–∞—á–∞–ª–æ: {{ exchange.start_date|date:"d.m.Y H:i" }}</span>
                                {% endif %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state">
                    <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±–º–µ–Ω–æ–≤.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}