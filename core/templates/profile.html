{% extends 'base.html' %}

{% block title %}–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å ‚Äî SkillSwap{% endblock %}

{% block content %}
    <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>

    <div style="background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 30px;">
        <h3>{{ user.full_name }}</h3>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>–ì–æ—Ä–æ–¥:</strong> {{ user.city|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}</p>
        <p><strong>–†–µ–π—Ç–∏–Ω–≥:</strong> {{ user.rating }} ‚≠ê</p>
        <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.registration_date|date:"d.m.Y" }}</p>
    </div>

    <h3>üéì –ú–æ–∏ –Ω–∞–≤—ã–∫–∏</h3>
    {% if user_skills %}
        <ul>
            {% for us in user_skills %}
                <li><strong>{{ us.skill.name }}</strong> ({{ us.skill.get_level_display }}) ‚Äî {{ us.skill.category.name }}</li>
                <p><a href="{% url 'skill_create' %}" style="color: #27ae60; font-weight: bold;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤—ã–∫</a></p>
            {% endfor %}
        </ul>
    {% else %}
        <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –Ω–∞–≤—ã–∫–æ–≤. <a href="{% url 'skill_create' %}" style="color: #27ae60; font-weight: bold;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–∞–≤—ã–∫</a></p>
    {% endif %}

    <h3>ü§ù –ú–æ–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ–±–º–µ–Ω–∞</h3>
    {% if user_proposals %}
        <div style="display: flex; flex-direction: column; gap: 15px;">
            {% for prop in user_proposals %}
                <div style="background: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; border-radius: 5px;">
                    <p><strong>–ü—Ä–µ–¥–ª–∞–≥–∞—é:</strong> {{ prop.skill_offered.name }} ‚Üí <strong>–•–æ—á—É:</strong> {{ prop.skill_wanted.name }}</p>
                    <p><em>–§–æ—Ä–º–∞—Ç:</em> {{ prop.get_format_display }} | –°–æ–∑–¥–∞–Ω–æ: {{ prop.created_at|date:"d.m.Y H:i" }}</p>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π. <a href="{% url 'proposal_create' %}">–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</a></p>
    {% endif %}

    <h3>üîÑ –ú–æ–∏ –æ–±–º–µ–Ω—ã</h3>
    {% if user_exchanges %}
        <div style="display: flex; flex-direction: column; gap: 15px;">
            {% for exchange in user_exchanges %}
                <div style="background: #e8f5e9; padding: 15px; border-left: 4px solid #28a745; border-radius: 5px;">
                    <p>–° <strong>{{ exchange.user1.full_name }}</strong> ‚Üî <strong>{{ exchange.user2.full_name }}</strong></p>
                    <p>–°—Ç–∞—Ç—É—Å: <strong>{{ exchange.get_status_display }}</strong> | –§–æ—Ä–º–∞—Ç: {{ exchange.get_format_display }}</p>
                    {% if exchange.start_date %}
                        <p>–ù–∞—á–∞–ª–æ: {{ exchange.start_date|date:"d.m.Y H:i" }}</p>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>–£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±–º–µ–Ω–æ–≤.</p>
    {% endif %}

    <hr>
    <a href="{% url 'logout' %}" style="color: #dc3545;">üö™ –í—ã–π—Ç–∏</a>
{% endblock %}